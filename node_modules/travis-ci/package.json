{
  "_from": "travis-ci",
  "_id": "travis-ci@2.1.1",
  "_inBundle": false,
  "_integrity": "sha1-mGliZa+CeuNXbzGqBth250tLCC4=",
  "_location": "/travis-ci",
  "_phantomChildren": {
    "async": "2.5.0",
    "aws4": "1.6.0",
    "bl": "1.1.2",
    "chalk": "1.1.3",
    "combined-stream": "1.0.5",
    "commander": "2.11.0",
    "extend": "3.0.1",
    "forever-agent": "0.6.1",
    "is-my-json-valid": "2.16.1",
    "is-typedarray": "1.0.0",
    "isstream": "0.1.2",
    "json-stringify-safe": "5.0.1",
    "jsprim": "1.4.1",
    "mime-types": "2.1.17",
    "oauth-sign": "0.8.2",
    "pinkie-promise": "2.0.1",
    "sshpk": "1.13.1",
    "stringstream": "0.0.5",
    "tough-cookie": "2.3.3"
  },
  "_requested": {
    "escapedName": "travis-ci",
    "fetchSpec": "latest",
    "name": "travis-ci",
    "raw": "travis-ci",
    "rawSpec": "",
    "registry": true,
    "saveSpec": null,
    "type": "tag"
  },
  "_requiredBy": [
    "#USER",
    "/"
  ],
  "_resolved": "https://registry.npmjs.org/travis-ci/-/travis-ci-2.1.1.tgz",
  "_shasum": "98696265af827ae3576f31aa06d876e74b4b082e",
  "_spec": "travis-ci",
  "_where": "/home/bluz/repos/travis-mocha-bot",
  "author": {
    "email": "pwmckenna@gmail.com",
    "name": "Patrick Williams"
  },
  "bin": {
    "travis-ci": "./bin/travis-ci.js"
  },
  "bugs": {
    "url": "https://github.com/pwmckenna/node-travis-ci/issues"
  },
  "bundleDependencies": false,
  "dependencies": {
    "github": "~0.1.10",
    "lodash": "~1.3.1",
    "request": "~2.74.0",
    "underscore.string": "~2.2.0rc"
  },
  "deprecated": false,
  "description": "node library to access the Travis-CI API",
  "devDependencies": {
    "grunt": "~0.4.1",
    "grunt-cli": "~0.1.9",
    "grunt-contrib-jshint": "~0.10.0",
    "grunt-env": "~0.4.0",
    "grunt-mocha-test": "~0.5.0",
    "grunt-release": "~0.7.0",
    "matchdep": "~0.1.2",
    "mocha": "~1.12.0",
    "q": "~1.0.0",
    "should": "~1.2.2"
  },
  "homepage": "https://github.com/pwmckenna/node-travis-ci",
  "keywords": [
    "travis-ci",
    "travis",
    "travisci",
    "ci",
    "continuous",
    "integration",
    "api"
  ],
  "license": "BSD",
  "main": "lib/travis-ci",
  "name": "travis-ci",
  "optionalDependencies": {},
  "readme": "node-travis-ci [![Build Status](https://travis-ci.org/pwmckenna/node-travis-ci.png?branch=master)](https://travis-ci.org/pwmckenna/node-travis-ci)\n==============\n\nnode library to access the [Travis-CI API](https://api.travis-ci.org/docs/)\n\n[![NPM](https://nodei.co/npm/travis-ci.png?downloads=true&stars=true)](https://npmjs.org/package/travis-ci)\n\n# Instantiation\n\n```js\nvar Travis = require('travis-ci');\nvar travis = new Travis({\n    version: '2.0.0'\n});\n\n// To access the Travis-CI Pro API\nvar travis = new Travis({\n    version: '2.0.0',\n    pro: true\n});\n\n// To set custom headers\nvar travis = new Travis({\n  version: '2.0.0',\n  headers: {\n    'user-agent': 'My Custom User Agent'\n  }\n});\n```\n\n# API\n\n### Upgrade Notice (Migrating to 2.x)\nDue to the expanding travis api, there were an increasing number of cases where a function could conceivably map to several http endpoints. To eliminate that complexity, and to ensure that the entire api could be exposed, the api has been rewritten to be a much more transparent layer on top of the http interface. Url path segments that are exposed as objects, unless they are followed by url parameters, in which case they are exposed as functions that consume those arguments. The function that makes the api call is now just http verbs (`get`/`post`/etc).\n\nFor instance, to use this library to call `GET /repos/:owner_name/:name/builds/:id`, you now do something like the following:\n```js\ntravis.repos(ownerName, repoName).builds(buildId).get(function (err, res) {\n   // same res as before\n});\n```\n\n### Authentication\n\nMany functions, such as [`travis.accounts`](https://api.travis-ci.org/docs/#Accounts), require authenticating as a user. \nCurrently the only way to authenticate is to start with a github oauth token, request a travis access token, and authenticate with that.\n\n```js\ntravis.auth.github.post({\n    github_token: GITHUB_OAUTH_TOKEN\n}, function (err, res) {\n    // res => {\n    //     access_token: XXXXXXX\n    // }\n    travis.authenticate({\n        access_token: res.access_token\n    }, function (err) {\n         // we've authenticated!\n    });\n});\n```\n\nAs a convenience, `authenticate` also accepts github tokens, or github credentials (which are only sent to github) and performs the necessary requests to aquire a travis access token. For example:\n\n```js\ntravis.authenticate({\n    github_token: GITHUB_OAUTH_TOKEN\n}, function (err) {\n    // we've authenticated! \n});\n```\nor\n```js\ntravis.authenticate({\n    username: GITHUB_USERNAME,\n    password: GITHUB_PASSWORD\n}, function (err) {\n    //we've authenticated!\n});\n```\n\n> __Pro Tip:__ Authentication is simply a convenience function that ensures your token has the required permissions, then appends your `access_token` to all subsequent requests. You can alternatively pass `access_token` to any request where permission is required.\n\n### [Accounts](https://api.travis-ci.org/docs/#Accounts)\n\nAccounts calls require [authentication](#Authentication).\n\n```js\ntravis.accounts.get(function (err, res) {\n    // res => {\n    //     \"accounts\": [\n    //         {\n    //             \"id\": 5186,\n    //             \"name\": \"Patrick Williams\",\n    //             \"login\": \"pwmckenna\",\n    //             \"type\": \"user\",\n    //             \"repos_count\": 48\n    //         },\n    //         {\n    //             \"id\": ***,\n    //             \"name\": \"BitTorrent Torque Labs\",\n    //             \"login\": \"bittorrenttorque\",\n    //             \"type\": \"organization\",\n    //             \"repos_count\": ***\n    //         },\n    //         {\n    //             \"id\": ***,\n    //             \"name\": null,\n    //             \"login\": \"Studyokee\",\n    //             \"type\": \"organization\",\n    //             \"repos_count\": ***\n    //         },\n    //         {\n    //             \"id\": ***,\n    //             \"name\": \"BitTorrent Inc.\",\n    //             \"login\": \"bittorrent\",\n    //             \"type\": \"organization\",\n    //             \"repos_count\": ***\n    //         }\n    //     ]\n    // }\n});\n```\n\n### [Authorization](https://api.travis-ci.org/docs/#Authorization)\n\n```js\ntravis.auth.github.post({\n    github_token: GITHUB_OAUTH_TOKEN\n}, function (err, res) {\n    // res => {\n    //     access_token: ***\n    // }\n});\n```\n\nAdditional endpoints that have not be implemented yet:\n\n* [travis.auth.authorize](https://api.travis-ci.org/docs/#/auth/authorize)\n* [travis.auth.access_token](https://api.travis-ci.org/docs/#POST%20/auth/access_token)\n\nEndpoints that exist, but are intended for brower flows:\n\n* [travis.auth.handshake](https://api.travis-ci.org/docs/#/auth/handshake)\n* [travis.auth.post_message](https://api.travis-ci.org/docs/#/auth/post_message)\n* [travis.auth.post_message.iframe](https://api.travis-ci.org/docs/#/auth/post_message/iframe)\n\n### [Branches](https://api.travis-ci.org/docs/#Branches)\n\n```js\ntravis.branches.get(function (err, res) {\n    // res => {\n    //     branches: [],\n    //     commits: []\n    // }\n});\n```\n\n### [Broadcasts](https://api.travis-ci.org/docs/#Broadcasts)\n\n```js\ntravis.broadcasts.get(function (err, res) {\n    // res => {\n    //     broadcasts: []\n    // }\n});\n```\n\n### [Builds](https://api.travis-ci.org/docs/#Builds)\n\n```js\n// to get the info for a specific build, specify the build id\n// this is data used for pages such as:\n// https://travis-ci.org/pwmckenna/node-travis-ci/builds/10380000\ntravis.builds(10380000).get(function (err, res) {\n    // res => {\n    //     \"build\": {\n    //         \"id\": 10380000,\n    //         \"repository_id\": 1095505,\n    //         \"commit_id\": 3053424,\n    //         \"number\": \"43\",\n    //         \"pull_request\": false,\n    //         \"pull_request_title\": null,\n    //         \"pull_request_number\": null,\n    //         \"config\": {\n    //             \"language\": \"node_js\",\n    //             \"node_js\": [\n    //                 \"0.10.1\"\n    //             ],\n    //             \"script\": [\n    //                 \"./node_modules/grunt-cli/bin/grunt test\"\n    //             ],\n    //             \".result\": \"configured\",\n    //             \"global_env\": [\n    //                 {\n    //                     \"secure\": \"SHezJGUSi1cc/V+AWBgmGe...\n    //                 },\n    //                 {\n    //                     \"secure\": \"opq2IxY6TquOtn4nCI75Y...\n    //                 },\n    //                 {\n    //                     \"secure\": \"f4rapdrgZJIeqUUBu3Bp/...\n    //                 }\n    //             ]\n    //         },\n    //         \"state\": \"canceled\",\n    //         \"started_at\": null,\n    //         \"finished_at\": \"2013-10-30T23:19:20Z\",\n    //         \"duration\": 0,\n    //         \"job_ids\": [\n    //             10380001\n    //         ]\n    //     },\n    //     \"commit\": {\n    //         \"id\": 3053424,\n    //         \"sha\": \"af594e5b0744e6fdd4af5c7470652286420db430\",\n    //         \"branch\": \"master\",\n    //         \"message\": \"1.0.1\",\n    //         \"committed_at\": \"2013-08-19T20:12:25Z\",\n    //         \"author_name\": \"Patrick Williams\",\n    //         \"author_email\": \"pwmckenna@gmail.com\",\n    //         \"committer_name\": \"Patrick Williams\",\n    //         \"committer_email\": \"pwmckenna@gmail.com\",\n    //         \"compare_url\": \"https://github.com/pwmckenna/node-travis-ci/...\n    //     },\n    //     \"jobs\": [\n    //         {\n    //             \"id\": 10380001,\n    //             \"repository_id\": 1095505,\n    //             \"build_id\": 10380000,\n    //             \"commit_id\": 3053424,\n    //             \"log_id\": 4540661,\n    //             \"state\": \"canceled\",\n    //             \"number\": \"43.1\",\n    //             \"config\": {\n    //                 \"language\": \"node_js\",\n    //                 \"node_js\": \"0.10.1\",\n    //                 \"script\": [\n    //                     \"./node_modules/grunt-cli/bin/grunt test\"\n    //                 ],\n    //                 \".result\": \"configured\",\n    //                 \"global_env\": \"GITHUB_OAUTH_TOKEN=[secure] ...\n    //             },\n    //             \"started_at\": null,\n    //             \"finished_at\": \"2013-10-30T23:19:19Z\",\n    //             \"queue\": \"builds.linux\",\n    //             \"allow_failure\": false,\n    //             \"tags\": \"\"\n    //         }\n    //     ]\n    // }\n});\n```\n```js\n// to cancel a build\ntravis.builds(10380000).cancel.post(function (err) {\n});\n```\n\n### [Documentation](https://api.travis-ci.org/docs/#Documentation)\n\n```js\ntravis.documentation.get(function (err, res) {\n    // res => <html>\n    //     ...\n    // </html\n});\n```\n\n### [Endpoints](https://api.travis-ci.org/docs/#Endpoints)\n\n```js\ntravis.endpoints.get(function (err, res) {\n    // res => [\n    //     {\n    //         \"name\": \"Home\",\n    //         \"doc\": \"\",\n    //         \"prefix\": \"/\",\n    //         \"routes\": [\n    //             {\n    //                 \"uri\": \"/\",\n    //                 \"verb\": \"GET\",\n    //                 \"doc\": \"Landing point...\",\n    //                 \"scope\": \"public\"\n    //             },\n    //             {\n    //                 \"uri\": \"/redirect\",\n    //                 \"verb\": \"GET\",\n    //                 \"doc\": \"Simple endpoints that redirects somewhere else...\",\n    //                 \"scope\": \"public\"\n    //             },\n    //             {\n    //                 \"uri\": \"/config\",\n    //                 \"verb\": \"GET\",\n    //                 \"doc\": \"Provides you with system info:...\",\n    //                 \"scope\": \"public\"\n    //             }\n    //         ]\n    //     },\n    //     {\n    //         \"name\": \"Accounts\",\n    //         \"doc\": \"\",\n    //         \"prefix\": \"/accounts\",\n    //         \"routes\": [\n    //             {\n    //                 \"uri\": \"/accounts/\",\n    //                 \"verb\": \"GET\",\n    //                 \"doc\": \"\",\n    //                 \"scope\": \"private\"\n    //             }\n    //         ]\n    //     },\n    //     ...\n    // ]\n});\n```\n```js\ntravis.endpoints('endpoints').get(function (err, res) {\n    // res => {\n    //     \"name\": \"Endpoints\",\n    //     \"doc\": \"Documents all available API endpoints...\",\n    //     \"prefix\": \"/endpoints\",\n    //     \"routes\": [\n    //         {\n    //             \"uri\": \"/endpoints/\",\n    //             \"verb\": \"GET\",\n    //             \"doc\": \"Lists all available API endpoints by URI prefix...\",\n    //             \"scope\": \"public\"\n    //         },\n    //         {\n    //             \"uri\": \"/endpoints/:prefix\",\n    //             \"verb\": \"GET\",\n    //             \"doc\": \"Infos about a specific controller....\",\n    //             \"scope\": \"public\"\n    //         }\n    //     ]\n    // }\n});\n```\n\n### [Hooks](https://api.travis-ci.org/docs/#Hooks)\n\nAll hook calls require [authentication](#Authentication).\n\n```js\ntravis.hooks.get(function (err, res) {\n    // res => [\n    //     {\n    //         id: 1095505,\n    //         name: 'node-travis-ci',\n    //         owner_name: 'pwmckenna',\n    //         description: 'node library to access the Travis-CI API',\n    //         active: true,\n    //         private: false,\n    //         admin: true\n    //     }\n    //     ...\n    // ]\n});\n```\n```js\ntravis.hooks(1095505).put(\n    hook: {\n        active: false\n    }\n}, function (err, res) {\n});\n```\n\n### [Jobs](https://api.travis-ci.org/docs/#Jobs)\n\n```js\ntravis.jobs(JOB_ID).get(function (err, res) {\n    // res => {\n    //     \"job\": {\n    //         \"id\": 9624444,\n    //         \"repository_id\": 1095505,\n    //         \"repository_slug\": \"pwmckenna/node-travis-ci\",\n    //         \"build_id\": 9624443,\n    //         \"commit_id\": 2836527,\n    //         \"log_id\": 3986694,\n    //         \"state\": \"failed\",\n    //         ...\n    //     },\n    //     \"commit\": {\n    //         \"id\": 2836527,\n    //         \"sha\": \"431d6e5d899f165e4786ce82c4672975cddca670\",\n    //         \"branch\": \"master\",\n    //         \"message\": \"fixing builds test\",\n    //         ...\n    //     }\n    // }\n});\n```\n```js\ntravis.jobs.log({\n    job_id: JOB_ID\n}, function (err, res) {\n    \n});\n```\n\n### [Logs](https://api.travis-ci.org/docs/#Logs)\n\n```js\ntravis.logs({\n    id: LOG_ID\n}, function (err, res) {\n    // res => {\n    //     log: {\n    //         id: 3986694,\n    //         job_id: 9624444,\n    //         type: 'Log',\n    //         body: 'Using worker: worker-linux-6-2.bb.travis-ci.org:travis-linux-15\\n\\n$ export GITHUB_OAUTH_TOKEN=[secure]...\n    //     }\n    // }\n});\n```\n\n### [Repos](https://api.travis-ci.org/docs/#Repos)\n\n```js\ntravis.repos('pwmckenna').get(function (err, res) {\n    // res => {\n    //     \"repos\": [\n    //         {\n    //         \"id\": 1095505,\n    //         \"slug\": \"pwmckenna/node-travis-ci\",\n    //         \"description\": \"node library to access the Travis-CI API\",\n    //         \"last_build_id\": 6347735,\n    //         \"last_build_number\": \"468\",\n    //         \"last_build_state\": \"started\",\n    //         \"last_build_duration\": null,\n    //         \"last_build_language\": null,\n    //         \"last_build_started_at\": \"2013-04-15T09:45:29Z\",\n    //         \"last_build_finished_at\": null\n    //         }\n    //     ]\n    // }\n});\n```\n```js\ntravis.repos('pwmckenna', 'node-travis-ci').get(function (err, res) {\n    // res => {\n    //     \"repo\": {\n    //         \"id\": 1095505,\n    //         \"slug\": \"pwmckenna/node-travis-ci\",\n    //         \"description\": \"node library to access the Travis-CI API\",\n    //         ...\n    //     }\n    // }\n});\n```\n```js\ntravis.repos(repoId).key.get(function (err, res) {\n    // res => {\n    //   key: '-----BEGIN RSA PUBLIC KEY-----\\nMIGfMA0GCSqGSIb...'    \n    // }\n});\n```\n```js\ntravis.repos('pwmckenna', 'node-travis-ci').builds.get(function (err, res) {\n    // res => {\n    //     builds: [],\n    //     commits: []\n    // }\n});\n```\n\n### [Requests](https://api.travis-ci.org/docs/#Requests)\n\nRequests calls require [authentication](#Authentication).\n\n```js\ntravis.requests.post(({\n    build_id: BUILD_ID    \n}, function (err, res) {\n    // res => {\n    //     \"result\": true,\n    //     \"flash\": [\n    //         {\n    //             \"notice\": \"The build was successfully restarted.\"\n    //         }\n    //     ]\n    // }\n});\n```\n\n### [Users](https://api.travis-ci.org/docs/#ss)\n\nAll user calls require [authentication](#Authentication).\n\n```js\ntravis.users.get(function (err, res) {\n    // res => {\n    //     \"user\": {\n    //         \"id\": 5186,\n    //         \"name\": \"Patrick Williams\",\n    //         \"login\": \"pwmckenna\",\n    //         \"email\": \"patrick@bittorrent.com\",\n    //         \"gravatar_id\": \"894f552b86b959df97353a7296baee5c\",\n    //         \"locale\": \"en\",\n    //         \"is_syncing\": false,\n    //         \"synced_at\": \"2013-10-30T22:47:49Z\",\n    //         \"correct_scopes\": true,\n    //         \"created_at\": \"2012-02-07T22:17:38Z\"\n    //     }\n    // }\n});\n```\n```js\ntravis.users.permissions.get(function (err, res) {\n    // res => {\n    //     \"permissions\": [\n    //         1446577,\n    //         107140,\n    //         1402719,\n    //         1392622,\n    //         ...\n    //     ]\n    // }\n\n});\n```\n```js\ntravis.users.sync.post(function (err, res) {\n    // res => {\n    //     \"result\": true\n    // }\n});\n```\n\n# CLI\n\nTo install as a command line utility, just install globally via npm.\n\n```bash\nnpm install -g travis-ci\n```\n\nThe entire library is available via command line interface. While it uses subcommands, the api is the same as above.\n\n```bash\ntravis-ci authenticate --username=pwmckenna --password=superSecret\n=>  {\n        \"access_token\": \"F7DlolJkD15isf4KEDuh_A\"\n    }\n# or\ntravis-ci auth github --github_token=ef7c329fb63479eb5be9719bb8b23162072bb20d\n=>  {\n        \"access_token\": \"F7DlolJkD15isf4KEDuh_A\"\n    }\n```\n\n> __Pro Tip:__ Passing OAuth tokens or github credentials via the command line will leave them in your shell history for all to see. Please shell responsibly.\n\n\nUse the `access_token` above in all subsequent commands that require authentication, such as requesting the builds for this project:\n\n```bash\ntravis-ci repos pwmckenna node-travis-ci builds --access_token=F7DlolJkD15isf4KEDuh_A\n=>  {\n        \"builds\": [\n            {\n                \"id\": 9630304,\n                \"repository_id\": 1095505,\n                \"pull_request\": false,\n                \"state\": \"passed\",\n                ...\n            },\n            ...\n        ]\n    }\n```\n",
  "readmeFilename": "README.md",
  "repository": {
    "type": "git",
    "url": "git://github.com/pwmckenna/node-travis-ci.git"
  },
  "scripts": {
    "test": "mocha --recursive test"
  },
  "version": "2.1.1"
}
